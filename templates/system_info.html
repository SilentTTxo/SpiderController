<!DOCTYPE html>
<!--[if IE 8]> <html lang="en" class="ie8"> <![endif]-->
<!--[if IE 9]> <html lang="en" class="ie9"> <![endif]-->
<!--[if !IE]><!--> <html lang="en"> <!--<![endif]-->
<!-- BEGIN HEAD -->
<head>
<link rel="stylesheet" type="text/css" href="/media/css/TT.css" />
</head>
<!-- END HEAD -->
<!-- BEGIN BODY -->
<body class="page-header-fixed">
<div class="loader"><div class="loading-1"></div><div class="loading-2">Loading...</div></div>
	<!-- BEGIN HEADER -->
	<div class="header navbar navbar-inverse navbar-fixed-top">
		<!-- BEGIN TOP NAVIGATION BAR -->
		<div class="navbar-inner">
			<div class="container-fluid">
				<!-- BEGIN LOGO -->
				<a class="brand" href="index.html">
				<img src="/media/image/logo.png" alt="logo" />
				</a>
				<!-- END LOGO -->
				<!-- BEGIN RESPONSIVE MENU TOGGLER -->
				<a href="javascript:;" class="btn-navbar collapsed" data-toggle="collapse" data-target=".nav-collapse">
				<img src="/media/image/menu-toggler.png" alt="" />
				</a>          
				<!-- END RESPONSIVE MENU TOGGLER -->            
				<!-- BEGIN TOP NAVIGATION MENU -->              
				<ul class="nav pull-right">

				</ul>
				<!-- END TOP NAVIGATION MENU --> 
			</div>
		</div>
		<!-- END TOP NAVIGATION BAR -->
	</div>
	<!-- END HEADER -->
	<!-- BEGIN CONTAINER -->   
	<div class="page-container row-fluid">
		<!-- BEGIN SIDEBAR -->
		<div class="page-sidebar nav-collapse collapse">
			<!-- BEGIN SIDEBAR MENU -->        
			<ul class="page-sidebar-menu">
			</ul>
			<!-- END SIDEBAR MENU -->
		</div>
		<!-- END SIDEBAR -->
		<!-- BEGIN PAGE -->
		<div class="page-content">
			<!-- BEGIN SAMPLE PORTLET CONFIGURATION MODAL FORM-->
			<div id="portlet-config" class="modal hide">
				<div class="modal-header">
					<button data-dismiss="modal" class="close" type="button"></button>
					<h3>portlet Settings</h3>
				</div>
				<div class="modal-body">
					<p>Here will be a configuration form</p>
				</div>
			</div>
			<!-- END SAMPLE PORTLET CONFIGURATION MODAL FORM-->
			<!-- BEGIN PAGE CONTAINER-->
			<div class="container-fluid">
			<style type="text/css">
			</style>
				<!-- BEGIN PAGE HEADER-->
				<div class="row-fluid">
					<div class="span12" id="pageinfo">
					</div>
				</div>
				<!-- END PAGE HEADER-->
				<!-- BEGIN PAGE CONTENT-->
				<div class="row-fluid">
					<div class="span12 dataContent">
						<div class="span12">
							<div class="portlet box grey">
								<div class="portlet-title">
									<div class="caption"><i class="icon-reorder"></i>系统信息</div>
									<div class="tools">
										<a href="javascript:;" class="collapse"></a>
										<a href="#portlet-config" data-toggle="modal" class="config"></a>
										<a href="javascript:;" class="reload"></a>
									</div>
								</div>
								<div class="portlet-body">
									<p>CPU：<span id="cpuspan"></span></p>
									<div class="progress">
											<div style="width: 0%;" class="bar" id="cpup"></div>
									</div>
									<p>RAM：<span id="ramspan"></span></p>
									<div class="progress">
											<div style="width: 0%;" class="bar" id="ramp"></div>
									</div>
									<p>NET：发出数据包：<span id="netsent"></span> 接收数据包：<span id="netrcvd"></span></p>
								</div>
							</div>
						</div>
					</div>
				</div>
				<!-- END PAGE CONTENT-->
			</div>
			<!-- END PAGE CONTAINER--> 
		</div>
		<!-- END PAGE -->    
	</div>
	<!-- END CONTAINER -->
	<!-- BEGIN FOOTER -->
	<div class="footer">
	</div>
	<!-- END FOOTER -->
	<!-- BEGIN JAVASCRIPTS(Load javascripts at bottom, this will reduce page load time) -->
	<!-- BEGIN CORE PLUGINS -->

	<script src="/media/js/jquery-1.10.1.min.js" type="text/javascript"></script>
	<script src="/media/js/jquery-migrate-1.2.1.min.js" type="text/javascript"></script>
	<!-- IMPORTANT! Load jquery-ui-1.10.1.custom.min.js before bootstrap.min.js to fix bootstrap tooltip conflict with jquery ui tooltip -->
	<script src="/media/js/jquery-ui-1.10.1.custom.min.js" type="text/javascript"></script>      
	<script src="/media/js/bootstrap.min.js" type="text/javascript"></script>
	<!--[if lt IE 9]>
	<script src="/media/js/excanvas.min.js"></script>
	<script src="/media/js/respond.min.js"></script>  
	<![endif]-->   
	<script src="/media/js/jquery.slimscroll.min.js" type="text/javascript"></script>
	<script src="/media/js/jquery.blockui.min.js" type="text/javascript"></script>  
	<script src="/media/js/jquery.cookie.min.js" type="text/javascript"></script>
	<script src="/media/js/jquery.uniform.min.js" type="text/javascript" ></script>
	<!-- END CORE PLUGINS -->
	<!-- BEGIN PAGE LEVEL PLUGINS -->
	<script src="/media/js/jquery.vmap.js" type="text/javascript"></script>   
	<script src="/media/js/jquery.vmap.russia.js" type="text/javascript"></script>
	<script src="/media/js/jquery.vmap.world.js" type="text/javascript"></script>
	<script src="/media/js/jquery.vmap.europe.js" type="text/javascript"></script>
	<script src="/media/js/jquery.vmap.germany.js" type="text/javascript"></script>
	<script src="/media/js/jquery.vmap.usa.js" type="text/javascript"></script>
	<script src="/media/js/jquery.vmap.sampledata.js" type="text/javascript"></script>  
	<script src="/media/js/jquery.flot.js" type="text/javascript"></script>
	<script src="/media/js/jquery.flot.resize.js" type="text/javascript"></script>
	<script src="/media/js/jquery.pulsate.min.js" type="text/javascript"></script>
	<script src="/media/js/jquery.flot.pie.js"></script>
	<script src="/media/js/jquery.flot.stack.js"></script>
	<script src="/media/js/jquery.flot.crosshair.js"></script>

	<script src="/media/js/date.js" type="text/javascript"></script>
	<script src="/media/js/daterangepicker.js" type="text/javascript"></script>     
	<script src="/media/js/jquery.gritter.js" type="text/javascript"></script>
	<script src="/media/js/fullcalendar.min.js" type="text/javascript"></script> 
	<script src="/media/js/app.js"></script>  
	<script src="//cdn.bootcss.com/Chart.js/1.1.0/Chart.js"></script>

	<script src="/media/js/TT.js"></script>

	<script>
	color = function(item,num){
		item = item.parent()
		num = parseInt(num.split("%")[0])
		if(num < 25){
			item.removeClass()
			item.addClass("progress progress-success")
		}else if(num < 50){
			item.removeClass()
			item.addClass("progress")
		}else if(num < 75){
			item.removeClass()
			item.addClass("progress progress-warning")
		}else{
			item.removeClass()
			item.addClass("progress progress-danger")
		}
	}
	flush = function(){
		$.ajax({
				type:"GET",
				url:"/api/getSystemInfo",
				success : function(result){
					result = jQuery.parseJSON(result);
					ramu = parseInt(result.RAM.split("/")[0])
					ramt = parseInt(result.RAM.split("/")[1])
					$("#cpup").width(result.CPU)
					$("#ramp").width(ramu/ramt*100+"%")
					$("#cpuspan").html(result.CPU)
					$("#ramspan").html(ramu+"M / "+ramt+"M")

					$("#netsent").html(result.NET.split(" ")[1]+"M")
					$("#netrcvd").html(result.NET.split(" ")[0]+"M")

					//color
					color($("#cpup"),result.CPU)
					color($("#ramp"),ramu/ramt*100+"%")
				}
			});
	}
		jQuery(document).ready(function() {

			App.init();
			TT.init();
			
			//flush()
			$("html").ajaxStop(function(){
				setInterval(flush,1000)
			})
		});
	</script>
	<!-- END JAVASCRIPTS -->
</body>
<!-- END BODY -->
</html>
